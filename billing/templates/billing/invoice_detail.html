{% extends 'base.html' %}
{% block content %}
<h2>Invoice {{ invoice.invoice_number }}</h2>
<p><strong>Customer:</strong> {{ invoice.customer.name }}</p>
<p><strong>Date:</strong> {{ invoice.date|date:"d/m/Y" }}</p>

<table border="1" cellpadding="5" cellspacing="0" style="width:100%; margin-top: 10px;">
    <thead>
        <tr>
            <th>Product</th>
            <th>Qty</th>
            <th>Rate</th>
            <th>GST Rate</th>
            <th>Line Total</th>
        </tr>
    </thead>
    <tbody>
        {% for item in invoice.items.all %}
        <tr>
            <td>{{ item.product.name }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.rate|floatformat:2 }}</td>
            <td>{{ item.gst_rate|floatformat:2 }}%</td>
            <td>{{ item.line_total|floatformat:2 }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<p><strong>Subtotal:</strong> {{ invoice.subtotal|floatformat:2 }}</p>
<p><strong>CGST:</strong> {{ invoice.cgst|floatformat:2 }}</p>
<p><strong>SGST:</strong> {{ invoice.sgst|floatformat:2 }}</p>
<p><strong>Total:</strong> {{ invoice.total|floatformat:2 }}</p>

<a href="{% url 'billing:invoice_pdf' invoice.pk %}" target="_blank">Download PDF</a> |
<a href="{% url 'billing:invoice_list' %}">Back to list</a>
{% endblock %}
